{%- liquid

  assign section_name = 'marquee'
  assign section_classes = section_name
  assign section_id = section_name | append: '--' | append: section.id

  assign aos_delay = 250
  assign aos_delay_increment = 250
  assign aos_id = section_id

  assign section_container = section.settings.container | default: 'container'
  assign section_marquee_direction = section.settings.marquee_direction | default: ''
  assign section_marquee_duration = section.settings.marquee_duration | default: 1000
  assign section_marquee_gap = section.settings.marquee_gap | default: 0
  assign section_marquee_blocks = section.blocks | where: 'type', 'marquee' | default: false
  assign section_marquee_range = (1..10)
  assign section_marquee_size = section.settings.marquee_size | default: ''
  assign section_marquee_style = section.settings.marquee_style | default: ''

  assign section_classes = section_classes | append: " " | append: section_name | append: "--" | append: marquee_direction
  assign section_classes = section_classes | append: " " | append: section_name | append: "--" | append: marquee_style
  assign section_classes = section_classes | append: " " | append: section_name | append: "--" | append: marquee_size

  capture aos_attrs
    render 'aos-attributes', anchor: aos_id, delay: aos_delay, transition: 'fade-left'
  endcapture
  assign aos_delay = aos_delay | plus: aos_delay_increment

-%}

{%- style -%}

  #{{ section_id }} {
    --marquee-duration: {{ section_marquee_direction }}s;
    --marquee-gap: {{ section_marquee_gap }}px;
  }

  @media screen and (min-width: 992px) {}

{%- endstyle -%}

<div class="{{ section_classes }}" id="{{ section_id }}">
  <div class="{{ section_name }}__layout">
    <div class="{{ section_name }}__main" {{ aos_attrs }}>
      {%- if section_marquee_blocks.size > 0 -%}
        <div class="{{ section_name }}__group">
          {%- for i in section_marquee_range -%}
            {%- if 1 == i -%}
              {%- render 'marquee-items', hidden: false, marquee_items: section_marquee_blocks -%}
            {%- else -%}
              {%- render 'marquee-items', hidden: true, marquee_items: section_marquee_blocks -%}
            {%- endif -%}
          {%- endfor -%}
        </div>
        <div class="{{ section_name }}__group" aria-hidden="true">
          {%- for i in section_marquee_range -%}
            {%- render 'marquee-items', hidden: false, marquee_items: section_marquee_blocks -%}
          {%- endfor -%}
        </div>
      {%- endif -%}
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Marquee",
  "tag": "section",
  "class": "section section--marquee",
  "settings": [
     {
			"content": "Settings",
			"type": "header"
		},
    {
      "content": "Anchor",
      "type": "header"
    },
    {
      "label": "Anchor ID",
      "info": "Optionally include a unique ID so that sections within the page can be linked to. Anchor IDs must be all lowercase, unique and replaced empty spaces with hyphens. For example: my-great-section-anchor",
      "type": "text",
      "id": "anchor_id"
    },
    {
			"content": "Background",
			"type": "header"
		},
    {
		  "label": "Background",
		  "type": "select",
		  "options": [
        { "label": "Black", "value": "black" },
			  { "label": "White", "value": "white" },
        { "label": "Yellow", "value": "yellow" }
		  ],
		  "default": "white",
		  "id": "background"
		},
    {
			"content": "Padding",
			"type": "header"
		},
		{
			"label": "Top Padding",
			"type": "range",
			"min": 0,
			"max": 300,
			"step": 4,
			"default": 36,
      "id": "padding_top"
		},
		{
			"label": "Bottom Padding",
			"type": "range",
			"min": 0,
			"max": 300,
			"step": 4,
			"default": 36,
      "id": "padding_bottom"
		},
    {
      "content": "Text",
      "type": "header"
    },
    {
      "label": "Text Colour",
      "type": "select",
      "options": [
        { "label": "Dark", "value": "dark" },
        { "label": "Light", "value": "light" }
      ],
      "default": "dark",
      "id": "text_colour"
    }
  ],
  "blocks": [
    {
      "name": "Marquee",
      "type": "marquee",
      "limit": 9,
      "settings": [
        {
          "label": "Text",
          "type": "text",
          "id": "text"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Marquee",
      "category": "Text"
    }
  ]
}
{% endschema %}
